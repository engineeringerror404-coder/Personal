<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Gift For You!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;400;500;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            background: linear-gradient(-45deg, #1e3c72, #2a5298, #4facfe, #00c6ff, #667eea, #764ba2);
            background-size: 400% 400%;
            animation: blueGradientShift 20s ease infinite;
        }

        @keyframes blueGradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            50% { background-position: 50% 100%; }
            75% { background-position: 0% 50%; }
            100% { background-position: 50% 0%; }
        }

        /* Animated background elements */
        .bg-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: floatShape 15s infinite linear;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            background: #4facfe;
            border-radius: 50%;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 60px;
            height: 60px;
            background: #00c6ff;
            border-radius: 20px;
            top: 60%;
            left: 80%;
            animation-delay: 3s;
            transform: rotate(45deg);
        }

        .shape:nth-child(3) {
            width: 100px;
            height: 100px;
            background: #667eea;
            border-radius: 50%;
            top: 80%;
            left: 20%;
            animation-delay: 6s;
        }

        .shape:nth-child(4) {
            width: 40px;
            height: 40px;
            background: #764ba2;
            border-radius: 50%;
            top: 30%;
            left: 70%;
            animation-delay: 9s;
        }

        @keyframes floatShape {
            0% {
                transform: translateY(0px) rotate(0deg) scale(1);
                opacity: 0.1;
            }
            25% {
                opacity: 0.3;
            }
            50% {
                transform: translateY(-20px) rotate(180deg) scale(1.1);
                opacity: 0.2;
            }
            75% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(0px) rotate(360deg) scale(1);
                opacity: 0.1;
            }
        }

        /* Three.js Canvas */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Enhanced floating bubbles */
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 40%, 
                rgba(79, 172, 254, 0.8), 
                rgba(0, 198, 255, 0.6),
                rgba(102, 126, 234, 0.4));
            animation: blueBubbleFloat 12s infinite ease-in-out;
            pointer-events: none;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }

        @keyframes blueBubbleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) rotate(36deg) scale(1);
            }
            50% {
                transform: translateY(50vh) rotate(180deg) scale(1.2);
                opacity: 0.8;
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) rotate(324deg) scale(1);
            }
            100% {
                transform: translateY(-10vh) rotate(360deg) scale(0.8);
                opacity: 0;
            }
        }

        /* Container */
        .container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: containerFadeIn 1.5s ease-out;
        }

        @keyframes containerFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(30px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .birthday-wish {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 700;
            color: #ffab04;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 5px 30px rgba(79, 172, 254, 0.5);
            animation: titleGlow 4s ease-in-out infinite alternate;
            background: linear-gradient(45deg, #ebef04, #feaf4f, #eb0ee0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes titleGlow {
            from {
                text-shadow: 0 5px 30px rgba(79, 172, 254, 0.3), 0 0 40px rgba(255, 255, 255, 0.2);
                transform: scale(1);
            }
            to {
                text-shadow: 0 5px 30px rgba(79, 172, 254, 0.6), 0 0 60px rgba(255, 255, 255, 0.4);
                transform: scale(1.02);
            }
        }

        .instruction {
            font-family: 'Quicksand', sans-serif;
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            color: rgba(255, 255, 255, 0.95);
            text-align: center;
            margin-bottom: 10vh;
            font-weight: 500;
            letter-spacing: 1.2px;
            transition: all 0.8s ease;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            animation: instructionPulse 3s ease-in-out infinite;
        }

        @keyframes instructionPulse {
            0%, 100% { opacity: 0.9; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(-2px); }
        }

        /* Enhanced Gift Container */
        .gift-container {
            perspective: 1200px;
            margin: 40px 0;
            margin-top: 6vh;
        }

        .gift-box {
            position: relative;
            width: 300px;
            height: 400px;
            margin: 0 auto;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            animation: giftIdle 6s ease-in-out infinite;
        }

        @keyframes giftIdle {
            0%, 100% { transform: rotateY(0deg) rotateX(0deg); }
            25% { transform: rotateY(5deg) rotateX(2deg); }
            50% { transform: rotateY(0deg) rotateX(0deg); }
            75% { transform: rotateY(-5deg) rotateX(-2deg); }
        }

        .gift-box:hover:not(.open) {
            transform: rotateY(15deg) rotateX(8deg) scale(1.08);
            animation: none;
        }

        .gift-lid {
            position: absolute;
            width: 340px;
            height: 340px;
            background: linear-gradient(135deg, #2980b9, #3498db, #5dade2, #85c1e9);
            top: -130px;
            left: -20px;
            transform-origin: top center;
            transition: transform 1.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-radius: 20px;
            box-shadow: 
                0 15px 40px rgba(52, 152, 219, 0.3),
                inset 0 -5px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .gift-lid::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255, 255, 255, 0.2) 50%, 
                transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .gift-box.open .gift-lid {
            transform: translateY(-280px) rotateX(140deg);
            opacity: 0;
        }

        .gift-base {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72, #2a5298, #4facfe);
            border-radius: 20px;
            position: relative;
            box-shadow: 
                0 20px 50px rgba(30, 60, 114, 0.4),
                inset 0 5px 20px rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .gift-base::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255, 255, 255, 0.1) 50%, 
                transparent 70%);
            animation: shimmer 4s infinite reverse;
        }

        /* Enhanced Bow */
        .bow {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 200px;
            z-index: 15;
            transition: all 1s ease-in-out;
            animation: bowFloat 4s ease-in-out infinite;
        }

        @keyframes bowFloat {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(-50%) translateY(-3px) rotate(2deg); }
        }

        .bow:before,
        .bow:after {
            content: '';
            position: absolute;
            background: linear-gradient(135deg, #f39c12, #f1c40f, #fff);
            border-radius: 12px;
            box-shadow: 
                0 5px 20px rgba(243, 156, 18, 0.3),
                inset 0 2px 10px rgba(255, 255, 255, 0.3);
        }

        .bow:before {
            width: 30px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        .bow:after {
            top: 50%;
            left: -35px;
            width: 100%;
            height: 30px;
            transform: translateY(-50%) rotate(90deg);
        }

        .gift-box.open .bow {
            opacity: 0;
            transform: translateX(-50%) scale(0) rotate(360deg);
        }

        /* Enhanced Revealed Gift */
        .revealed-gift {
            position: absolute;
            top: 50%;
            left: 50%;
            height: 30vh;
            transform: translate(-50%, -50%) scale(0) rotateY(180deg);
            opacity: 0;
            transition: all 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-align: center;
            z-index: 5;
        }

        .gift-box.open .revealed-gift {
            transform: translate(-50%, -50%) scale(1) rotateY(0deg);
            opacity: 1;
            transition-delay: 0.5s;
        }

        .revealed-gift .gift-video {
            max-width: 220px;
            width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(79, 172, 254, 0.3);
            border: 4px solid rgba(255, 255, 255, 0.9);
            transition: transform 0.5s ease;
            display: block;
            margin: 0 auto;
            animation: videoGlow 3s ease-in-out infinite alternate;
        }

        @keyframes videoGlow {
            from { box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 40px rgba(79, 172, 254, 0.3); }
            to { box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 60px rgba(79, 172, 254, 0.6); }
        }

        .revealed-gift .gift-video:hover {
            transform: scale(1.05) rotate(1deg);
        }

        .revealed-gift p {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: #fff;
            margin-top: 20px;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);
            animation: textSparkle 2s ease-in-out infinite alternate;
        }

        @keyframes textSparkle {
            from { text-shadow: 0 3px 15px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 255, 255, 0.3); }
            to { text-shadow: 0 3px 15px rgba(0, 0, 0, 0.4), 0 0 30px rgba(255, 255, 255, 0.6); }
        }

        /* Enhanced Interactive Cake Section */
        .cake-section {
            margin: 60px 0;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1.5s ease-out;
        }

        .cake-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .cake-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2rem, 5vw, 3rem);
            color: white;
            text-align: center;
            margin-bottom: 30vh;
            text-shadow: 0 3px 20px rgba(79, 172, 254, 0.5);
            animation: titleBounce 3s ease-in-out infinite;
        }

        @keyframes titleBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .interactive-cake {
            position: relative;
            width: 350px;
            height: 250px;
            margin: 0 auto;
            cursor: pointer;
            animation: cakeIdle 8s ease-in-out infinite;
        }

        @keyframes cakeIdle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.02) rotate(0.5deg); }
            50% { transform: scale(1) rotate(0deg); }
            75% { transform: scale(1.02) rotate(-0.5deg); }
        }

        .cake-layer {
            position: absolute;
            border-radius: 20px;
            transition: all 0.5s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .cake-bottom {
            width: 350px;
            height: 80px;
            background: linear-gradient(135deg, #6b4423, #8b6914, #a0522d);
            bottom: 0;
            animation: layerFloat 6s ease-in-out infinite;
        }

        .cake-middle {
            width: 280px;
            height: 70px;
            background: linear-gradient(135deg, #2980b9, #3498db, #5dade2);
            bottom: 70px;
            left: 35px;
            animation: layerFloat 6s ease-in-out infinite 0.5s;
        }

        .cake-top {
            width: 210px;
            height: 60px;
            background: linear-gradient(135deg, #1e3c72, #2a5298, #4facfe);
            bottom: 130px;
            left: 70px;
            animation: layerFloat 6s ease-in-out infinite 1s;
        }

        @keyframes layerFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-3px) scale(1.01); }
        }

        .cake-icing {
            position: absolute;
            width: 370px;
            height: 25px;
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7, #ffffff);
            border-radius: 50px;
            top: -12px;
            left: -10px;
            box-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.2),
                inset 0 2px 10px rgba(255, 255, 255, 0.8);
            animation: icingGlow 4s ease-in-out infinite alternate;
        }

        @keyframes icingGlow {
            from { box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2), inset 0 2px 10px rgba(255, 255, 255, 0.8); }
            to { box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3), inset 0 2px 15px rgba(255, 255, 255, 1); }
        }

        /* Enhanced Candles */
        .candles {
            position: absolute;
            top: -100px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 0 60px;
        }

        .candle {
            width: 12px;
            height: 60px;
            background: linear-gradient(to bottom, #f39c12, #e67e22, #d35400);
            border-radius: 6px;
            position: relative;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.5s ease;
            animation: candleWaver 4s ease-in-out infinite;
        }

        @keyframes candleWaver {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(1deg) scale(1.02); }
            50% { transform: rotate(0deg) scale(1); }
            75% { transform: rotate(-1deg) scale(1.02); }
        }

        .candle:hover {
            transform: scale(1.1) rotate(2deg);
        }

        .candle-flame {
            position: absolute;
            width: 16px;
            height: 20px;
            background: radial-gradient(circle at 30% 40%, #ff6b35, #f7931e, #ffd700, #fff);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            top: -20px;
            left: -2px;
            animation: flameFlicker 2s infinite alternate;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        @keyframes flameFlicker {
            0% {
                transform: scale(1) rotate(-1deg);
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            }
            100% {
                transform: scale(1.15) rotate(1deg);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            }
        }

        .candle-flame.blown {
            animation: blowOutFlame 0.8s ease-out forwards;
        }

        @keyframes blowOutFlame {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(0.5) translateY(-10px);
                opacity: 0.5;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        /* Enhanced Action buttons */
        .action-buttons {
            display: flex;
            gap: 25px;
            margin: 50px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #4facfe, #00c6ff);
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 1rem;
            box-shadow: 
                0 8px 25px rgba(79, 172, 254, 0.3),
                inset 0 2px 10px rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 15px 40px rgba(79, 172, 254, 0.4),
                inset 0 2px 10px rgba(255, 255, 255, 0.3);
        }

        .action-btn:active {
            transform: translateY(-2px) scale(1.02);
        }

        /* Enhanced Next button */
        .next-btn {
            position: relative;
            display: inline-block;
            padding: 18px 50px;
            color: white;
            text-decoration: none;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            letter-spacing: 2px;
            margin-top: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50px;
            overflow: hidden;
            transition: all 0.5s ease;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
            animation: nextBtnPulse 3s ease-in-out infinite;
        }

        @keyframes nextBtnPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .next-btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 25px 60px rgba(102, 126, 234, 0.6);
            animation: none;
        }

        .next-btn span {
            position: absolute;
            display: block;
        }

        .next-btn span:nth-child(1) {
            top: 0;
            left: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8));
            animation: btn-anim1 2s linear infinite;
        }

        .next-btn span:nth-child(2) {
            top: -100%;
            right: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.8));
            animation: btn-anim2 2s linear infinite;
            animation-delay: 0.5s;
        }

        .next-btn span:nth-child(3) {
            bottom: 0;
            right: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(270deg, transparent, rgba(255, 255, 255, 0.8));
            animation: btn-anim3 2s linear infinite;
            animation-delay: 1s;
        }

        .next-btn span:nth-child(4) {
            bottom: -100%;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(360deg, transparent, rgba(255, 255, 255, 0.8));
            animation: btn-anim4 2s linear infinite;
            animation-delay: 1.5s;
        }

        @keyframes btn-anim1 {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }
        @keyframes btn-anim2 {
            0% { top: -100%; }
            50%, 100% { top: 100%; }
        }
        @keyframes btn-anim3 {
            0% { right: -100%; }
            50%, 100% { right: 100%; }
        }
        @keyframes btn-anim4 {
            0% { bottom: -100%; }
            50%, 100% { bottom: 100%; }
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateY(30px) scale(0.9);
        }

        .visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0) scale(1);
            transition: all 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Enhanced particle effects */
        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: explodeParticle 1.5s ease-out forwards;
        }

        @keyframes explodeParticle {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(25);
                opacity: 0;
            }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .birthday-wish {
                
                font-size: 2.5rem;
                margin-bottom: 15px;
            }
            
            .instruction {
                font-size: 1.1rem;
                margin-bottom: 30px;
            }
            
            .gift-box {
                width: 250px;
                height: 350px;
            }
            
            .gift-lid {
                width: 280px;
                height: 280px;
                top: -100px;
            }
            
            .revealed-gift .gift-video {
                width: 200px;
                height : 290px;
                /* margin-top: 7vh; */
            }
            
            .revealed-gift p {
                font-size: 1.8rem;
                margin-top: 15px;
            }
            
            .interactive-cake {
                width: 280px;
                height: 200px;
            }
            
            .cake-bottom { 
                width: 280px; 
                height: 65px;
            }
            
            .cake-middle { 
                width: 220px; 
                height: 55px;
                left: 30px; 
                bottom: 55px;
            }
            
            .cake-top { 
                width: 160px; 
                height: 45px;
                left: 60px; 
                bottom: 100px;
            }
            
            .cake-icing { 
                width: 300px; 
                left: -10px; 
            }
            
            .candles {
                top: -80px;
                padding: 0 40px;
            }
            
            .candle {
                width: 10px;
                height: 50px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .action-btn {
                padding: 12px 25px;
                font-size: 0.9rem;
            }
            
            .next-btn {
                position: static;
                padding: 15px 35px;
                font-size: 1rem;
                margin-top: 40px;
            }
            
            .cake-title {
                margin-bottom: 20vh;
                font-size: 2.2rem;
                
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .birthday-wish {
                font-size: 2rem;
            }
            
            .gift-box {
                width: 200px;
                height: 250px;
            }
            
            .gift-lid {
                width: 230px;
                height: 230px;
                top: -85px;
            }
            
            .bow {
                width: 150px;
                height: 150px;
                top: -30px;
            }
            
            .interactive-cake {
                width: 220px;
                height: 160px;
            }
            
            .cake-bottom { 
                width: 220px; 
                height: 50px;
            }
            
            .cake-middle { 
                width: 170px; 
                height: 45px;
                left: 25px; 
                bottom: 40px;
            }
            
            .cake-top { 
                width: 120px; 
                height: 35px;
                left: 50px; 
                bottom: 75px;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4facfe, #00c6ff);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
    </style>
</head>
<body>
    <!-- Animated background shapes -->
    <div class="bg-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Three.js Canvas -->
    <canvas id="three-canvas"></canvas>

    <!-- Floating Bubbles Container -->
    <div class="bubbles-container"></div>

    <div class="container">
        <h1 class="birthday-wish">🎉 A Special Gift For You! 🎂</h1>
        <p class="instruction" id="instruction">✨ Click the magical gift box to reveal what's inside... ✨</p>

        <!-- Enhanced Gift Container -->
        <div class="gift-container">
            <div class="gift-box" id="giftBox">
                <div class="gift-lid"></div>
                <div class="bow"></div>
                <div class="gift-base">
                    <div class="revealed-gift">
                        <video class="gift-video" controls preload="metadata" poster="../assets/images/placeholder.jpg">
                            <source src="../assets/videos/VN20240418_025735.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <!-- <p>💙 Just For You, Meri Bestie! 💙</p> -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Interactive Cake Section -->
        <div class="cake-section" id="cakeSection">
            <h2 class="cake-title">🎂 Now Let's Celebrate with Magical Cake! 🌟</h2>
            
            <div class="interactive-cake" id="interactiveCake">
                <div class="cake-icing"></div>
                <div class="cake-layer cake-bottom"></div>
                <div class="cake-layer cake-middle"></div>
                <div class="cake-layer cake-top"></div>
                
                <div class="candles" id="candles">
                    <div class="candle"><div class="candle-flame" data-candle="0"></div></div>
                    <div class="candle"><div class="candle-flame" data-candle="1"></div></div>
                    <div class="candle"><div class="candle-flame" data-candle="2"></div></div>
                    <div class="candle"><div class="candle-flame" data-candle="3"></div></div>
                    <div class="candle"><div class="candle-flame" data-candle="4"></div></div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" id="blowAllBtn">🌬️ Blow All Candles</button>
                <button class="action-btn" id="fireworksBtn">🎆 Launch Fireworks</button>
            </div>
        </div>

        <a href="03-message.html" id="next-button" class="next-btn hidden">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            ✨ Continue to Message ✨
        </a>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // Global variables
        let scene, camera, renderer, particles = [];
        let isGiftOpen = false;
        let candlesBlown = 0;
        let totalCandles = 5;

        // Initialize Enhanced Three.js scene
        function initThreeJS() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('three-canvas'),
                alpha: true,
                antialias: true
            });

            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);

            // Create enhanced 3D particles with blue theme
            const particleGeometry = new THREE.SphereGeometry(0.03, 12, 12);
            const blueColors = [0x4facfe, 0x00c6ff, 0x667eea, 0x764ba2, 0x2980b9, 0x3498db];
            
            for (let i = 0; i < 100; i++) {
                const particleMaterial = new THREE.MeshBasicMaterial({
                    color: blueColors[Math.floor(Math.random() * blueColors.length)],
                    transparent: true,
                    opacity: 0.7 + Math.random() * 0.3
                });
                
                const particle = new THREE.Mesh(particleGeometry, particleMaterial);
                particle.position.set(
                    (Math.random() - 0.5) * 30,
                    (Math.random() - 0.5) * 30,
                    (Math.random() - 0.5) * 30
                );
                particle.velocity = {
                    x: (Math.random() - 0.5) * 0.015,
                    y: (Math.random() - 0.5) * 0.015,
                    z: (Math.random() - 0.5) * 0.015
                };
                particle.rotationSpeed = {
                    x: Math.random() * 0.02,
                    y: Math.random() * 0.02,
                    z: Math.random() * 0.02
                };
                scene.add(particle);
                particles.push(particle);
            }

            camera.position.z = 10;
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);

            particles.forEach((particle, index) => {
                particle.position.x += particle.velocity.x;
                particle.position.y += particle.velocity.y;
                particle.position.z += particle.velocity.z;

                if (particle.position.x > 15 || particle.position.x < -15) particle.velocity.x *= -1;
                if (particle.position.y > 15 || particle.position.y < -15) particle.velocity.y *= -1;
                if (particle.position.z > 15 || particle.position.z < -15) particle.velocity.z *= -1;

                particle.rotation.x += particle.rotationSpeed.x;
                particle.rotation.y += particle.rotationSpeed.y;
                particle.rotation.z += particle.rotationSpeed.z;

                // Pulsing effect
                const time = Date.now() * 0.001;
                particle.scale.setScalar(1 + Math.sin(time + index * 0.1) * 0.2);
            });

            renderer.render(scene, camera);
        }

        // Create enhanced floating bubbles
        function createBubbles() {
            const container = document.querySelector('.bubbles-container');
            
            setInterval(() => {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble');
                
                const size = Math.random() * 80 + 30;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.animationDuration = (Math.random() * 8 + 8) + 's';
                bubble.style.animationDelay = Math.random() * 3 + 's';
                
                // Add random opacity
                bubble.style.opacity = 0.3 + Math.random() * 0.4;
                
                container.appendChild(bubble);
                
                setTimeout(() => bubble.remove(), 16000);
            }, 800);
        }

        // Enhanced gift box interaction
        function setupGiftBox() {
            const giftBox = document.getElementById('giftBox');
            const instruction = document.getElementById('instruction');
            const cakeSection = document.getElementById('cakeSection');

            giftBox.addEventListener('click', () => {
                if (isGiftOpen) return;
                isGiftOpen = true;

                giftBox.classList.add('open');
                
                // Enhanced opening sequence
                setTimeout(() => {
                    instruction.innerHTML = "🌟 Beautiful! Now let's celebrate with some magical cake! 🎂✨";
                    cakeSection.classList.add('visible');
                    createMagicalSparkles(giftBox.getBoundingClientRect());
                }, 1800);

                setTimeout(() => {
                    createEnhancedFireworks(giftBox.getBoundingClientRect());
                }, 1000);

                // Add screen flash effect
                createScreenFlash();
            });
        }

        // Enhanced candle interactions
        function setupCandles() {
            const flames = document.querySelectorAll('.candle-flame');
            const blowAllBtn = document.getElementById('blowAllBtn');

            flames.forEach((flame, index) => {
                flame.addEventListener('click', (e) => {
                    e.stopPropagation();
                    blowCandle(flame);
                });
            });

            blowAllBtn.addEventListener('click', () => {
                flames.forEach((flame, index) => {
                    if (!flame.classList.contains('blown')) {
                        setTimeout(() => blowCandle(flame), index * 200);
                    }
                });
            });
        }

        function blowCandle(flame) {
            if (flame.classList.contains('blown')) return;
            
            flame.classList.add('blown');
            candlesBlown++;
            
            // Create enhanced sparkle effect
            createEnhancedSparkles(flame.getBoundingClientRect());
            
            // Play blow sound effect (visual feedback)
            createBlowEffect(flame);
            
            if (candlesBlown === totalCandles) {
                setTimeout(() => {
                    document.getElementById('instruction').innerHTML = "🌟 All candles blown! What a magical moment! Ready for the next surprise? 🎉";
                    createGrandCelebration();
                    showNextButton();
                }, 1000);
            }
        }

        function createBlowEffect(flame) {
            const blowEffect = document.createElement('div');
            const rect = flame.getBoundingClientRect();
            
            blowEffect.style.cssText = `
                position: fixed;
                left: ${rect.left + rect.width/2}px;
                top: ${rect.top + rect.height/2}px;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
                animation: blowExpand 0.8s ease-out forwards;
                pointer-events: none;
                z-index: 1000;
            `;
            
            document.body.appendChild(blowEffect);
            setTimeout(() => blowEffect.remove(), 800);
        }

        function showNextButton() {
            setTimeout(() => {
                document.getElementById('next-button').classList.remove('hidden');
                document.getElementById('next-button').classList.add('visible');
            }, 1500);
        }

        // Enhanced fireworks effect
        function createEnhancedFireworks(rect) {
            const colors = ['#4facfe', '#00c6ff', '#667eea', '#764ba2', '#2980b9', '#3498db', '#ffffff', '#f1c40f'];
            
            for (let i = 0; i < 30; i++) {
                const firework = document.createElement('div');
                firework.classList.add('firework');
                firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                firework.style.left = (rect.left + rect.width / 2) + 'px';
                firework.style.top = (rect.top + rect.height / 2) + 'px';
                
                const angle = (Math.PI * 2 * i) / 30;
                const velocity = Math.random() * 150 + 100;
                
                firework.style.setProperty('--dx', Math.cos(angle) * velocity + 'px');
                firework.style.setProperty('--dy', Math.sin(angle) * velocity + 'px');
                
                firework.style.boxShadow = `0 0 20px ${colors[Math.floor(Math.random() * colors.length)]}`;
                
                document.body.appendChild(firework);
                
                setTimeout(() => firework.remove(), 1500);
            }
        }

        // Enhanced sparkles effect
        function createEnhancedSparkles(rect) {
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.style.cssText = `
                    position: fixed;
                    width: 6px;
                    height: 6px;
                    background: linear-gradient(45deg, #ffd700, #ffffff, #4facfe);
                    border-radius: 50%;
                    left: ${rect.left + rect.width / 2}px;
                    top: ${rect.top + rect.height / 2}px;
                    animation: enhancedSparkle 1.5s ease-out forwards;
                    pointer-events: none;
                    z-index: 1000;
                    box-shadow: 0 0 10px #ffd700;
                `;
                
                const angle = (Math.PI * 2 * i) / 15;
                const distance = Math.random() * 50 + 30;
                sparkle.style.setProperty('--dx', Math.cos(angle) * distance + 'px');
                sparkle.style.setProperty('--dy', Math.sin(angle) * distance + 'px');
                
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 1500);
            }
        }

        // Magical sparkles for gift opening
        function createMagicalSparkles(rect) {
            for (let i = 0; i < 25; i++) {
                const sparkle = document.createElement('div');
                sparkle.style.cssText = `
                    position: fixed;
                    width: 8px;
                    height: 8px;
                    background: linear-gradient(45deg, #4facfe, #00c6ff, #ffffff);
                    border-radius: 50%;
                    left: ${rect.left + Math.random() * rect.width}px;
                    top: ${rect.top + Math.random() * rect.height}px;
                    animation: magicalSparkle 2s ease-out forwards;
                    pointer-events: none;
                    z-index: 1000;
                `;
                
                sparkle.style.animationDelay = Math.random() * 0.5 + 's';
                
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 2500);
            }
        }

        // Grand celebration effect
        function createGrandCelebration() {
            // Create multiple fireworks
            for (let j = 0; j < 5; j++) {
                setTimeout(() => {
                    const rect = {
                        left: Math.random() * window.innerWidth,
                        top: Math.random() * (window.innerHeight * 0.5),
                        width: 0,
                        height: 0
                    };
                    createEnhancedFireworks(rect);
                }, j * 300);
            }
            
            // Create confetti rain
            createEnhancedConfettiRain();
            
            // Create celebration text
            createCelebrationText();
        }

        // Enhanced confetti rain
        function createEnhancedConfettiRain() {
            const colors = ['#4facfe', '#00c6ff', '#667eea', '#764ba2', '#f1c40f', '#ffffff'];
            
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: fixed;
                    width: ${Math.random() * 15 + 8}px;
                    height: ${Math.random() * 15 + 8}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}%;
                    top: -20px;
                    animation: confetti-enhanced-fall ${Math.random() * 3 + 4}s linear forwards;
                    pointer-events: none;
                    border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
                    transform: rotate(${Math.random() * 360}deg);
                    z-index: 1000;
                `;
                
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 7000);
            }
        }

        function createCelebrationText() {
            const celebration = document.createElement('div');
            celebration.style.cssText = `
                position: fixed;
                top: 30%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-family: 'Dancing Script', cursive;
                font-size: clamp(2rem, 6vw, 4rem);
                color: #6c1e1e;
                text-shadow: #6c1e1e;
                z-index: 1000;
                animation: celebrationGlow 3s ease-out forwards;
                pointer-events: none;
                text-align: center;
                background: linear-gradient(45deg, #4facfe, #00c6ff, #ffffff);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            `;
            celebration.innerHTML = '🌟 MAGICAL MOMENT! 🌟<br>🎉 HAPPY BIRTHDAY! 🎂';
            
            document.body.appendChild(celebration);
            setTimeout(() => celebration.remove(), 4000);
        }

        function createScreenFlash() {
            const flash = document.createElement('div');
            flash.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle, rgba(79,172,254,0.3) 0%, transparent 70%);
                z-index: 999;
                animation: screenFlash 0.8s ease-out forwards;
                pointer-events: none;
            `;
            
            document.body.appendChild(flash);
            setTimeout(() => flash.remove(), 800);
        }

        // Setup all interactions
        function setupInteractions() {
            setupGiftBox();
            setupCandles();

            // Enhanced button interactions
            document.getElementById('fireworksBtn').addEventListener('click', () => {
                // Create multiple random fireworks
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const rect = {
                            left: Math.random() * (window.innerWidth - 200) + 100,
                            top: Math.random() * (window.innerHeight * 0.6) + 100,
                            width: 0,
                            height: 0
                        };
                        createEnhancedFireworks(rect);
                    }, i * 500);
                }
                createEnhancedConfettiRain();
            });

            // Enhanced hover effects for cake layers
            const cakeLayers = document.querySelectorAll('.cake-layer');
            cakeLayers.forEach((layer, index) => {
                layer.addEventListener('mouseenter', () => {
                    layer.style.transform = `scale(1.03) translateY(-2px)`;
                    layer.style.filter = 'brightness(1.15) saturate(1.2)';
                    layer.style.boxShadow = '0 15px 40px rgba(79, 172, 254, 0.4)';
                });
                
                layer.addEventListener('mouseleave', () => {
                    layer.style.transform = '';
                    layer.style.filter = '';
                    layer.style.boxShadow = '';
                });
            });

            // Add cake click effect
            const cake = document.getElementById('interactiveCake');
            cake.addEventListener('click', () => {
                cake.style.animation = 'none';
                cake.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    cake.style.animation = 'cakeIdle 8s ease-in-out infinite';
                    cake.style.transform = '';
                }, 300);
                
                createEnhancedSparkles(cake.getBoundingClientRect());
            });
        }

        // Window resize handler
        function handleResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            initThreeJS();
            createBubbles();
            setupInteractions();
            
            window.addEventListener('resize', handleResize);
            
            // Add enhanced CSS animations
            const additionalStyles = document.createElement('style');
            additionalStyles.textContent = `
                @keyframes enhancedSparkle {
                    0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
                    50% { transform: translate(calc(var(--dx) * 0.5), calc(var(--dy) * 0.5)) scale(1.5) rotate(180deg); opacity: 0.8; }
                    100% { transform: translate(var(--dx), var(--dy)) scale(0) rotate(360deg); opacity: 0; }
                }
                
                @keyframes magicalSparkle {
                    0% { transform: scale(0) rotate(0deg); opacity: 0; }
                    25% { transform: scale(1.5) rotate(90deg); opacity: 1; }
                    75% { transform: scale(1) rotate(270deg); opacity: 0.8; }
                    100% { transform: scale(0) rotate(360deg); opacity: 0; }
                }
                
                @keyframes celebrationGlow {
                    0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
                    25% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
                    75% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                    100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
                }
                
                @keyframes confetti-enhanced-fall {
                    0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
                    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
                }
                
                @keyframes screenFlash {
                    0% { opacity: 0; }
                    50% { opacity: 1; }
                    100% { opacity: 0; }
                }
                
                @keyframes blowExpand {
                    0% { transform: scale(0); opacity: 0.8; }
                    50% { transform: scale(2); opacity: 0.4; }
                    100% { transform: scale(4); opacity: 0; }
                }
                
                .firework {
                    animation: fireworkEnhancedExplode 1.5s ease-out forwards;
                }
                
                @keyframes fireworkEnhancedExplode {
                    0% { transform: translate(0, 0) scale(1); opacity: 1; }
                    50% { opacity: 1; }
                    100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
                }
            `;
            document.head.appendChild(additionalStyles);
            
            // Add loading animation
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 1s ease-in';
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>